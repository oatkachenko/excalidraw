var he=Object.create;var Y=Object.defineProperty;var ge=Object.getOwnPropertyDescriptor;var ye=Object.getOwnPropertyNames;var _e=Object.getPrototypeOf,Ae=Object.prototype.hasOwnProperty;var Le=(e,t)=>()=>(e&&(t=e(e=0)),t);var X=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Se=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ye(t))!Ae.call(e,i)&&i!==n&&Y(e,i,{get:()=>t[i],enumerable:!(o=ge(t,i))||o.enumerable});return e};var z=(e,t,n)=>(n=e!=null?he(_e(e)):{},Se(t||!e||!e.__esModule?Y(n,"default",{value:e,enumerable:!0}):n,e));var d,a=Le(()=>{d={PROD:!0}});var le=X((V,ae)=>{a();(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof V=="object"?ae.exports=t():(e.PromisePool=t(),e.promisePool=e.PromisePool)})(V,function(){"use strict";var e=function(){this._listeners={}};e.prototype.addEventListener=function(r,l){this._listeners[r]=this._listeners[r]||[],this._listeners[r].indexOf(l)<0&&this._listeners[r].push(l)},e.prototype.removeEventListener=function(r,l){if(this._listeners[r]){var p=this._listeners[r].indexOf(l);p>=0&&this._listeners[r].splice(p,1)}},e.prototype.dispatchEvent=function(r){if(this._listeners[r.type]&&this._listeners[r.type].length)for(var l=this._listeners[r.type].slice(),p=0,x=l.length;p<x;++p)l[p].call(this,r)};var t=function(r){return typeof r.constructor=="function"&&r.constructor.name==="GeneratorFunction"},n=function(r){return{next:function(){var l=r();return l?{value:l}:{done:!0}}}},o=function(r){var l=!1;return{next:function(){return l?{done:!0}:(l=!0,{value:r})}}},i=function(r,l){var p=typeof r;if(p==="object"){if(typeof r.next=="function")return r;if(typeof r.then=="function")return o(r)}return p==="function"?t(r)?r():n(r):o(l.resolve(r))},c=function(r,l,p){this.target=r,this.type=l,this.data=p},s=function(r,l,p){if(e.call(this),typeof l!="number"||Math.floor(l)!==l||l<1)throw new Error("Invalid concurrency");this._concurrency=l,this._options=p||{},this._options.promise=this._options.promise||Promise,this._iterator=i(r,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return s.prototype=new e,s.prototype.constructor=s,s.prototype.concurrency=function(r){return typeof r<"u"&&(this._concurrency=r,this.active()&&this._proceed()),this._concurrency},s.prototype.size=function(){return this._size},s.prototype.active=function(){return!!this._promise},s.prototype.promise=function(){return this._promise},s.prototype.start=function(){var r=this,l=this._options.promise;return this._promise=new l(function(p,x){r._callbacks={reject:x,resolve:p},r._proceed()}),this._promise},s.prototype._fireEvent=function(r,l){this.dispatchEvent(new c(this,r,l))},s.prototype._settle=function(r){r?this._callbacks.reject(r):this._callbacks.resolve(),this._promise=null,this._callbacks=null},s.prototype._onPooledPromiseFulfilled=function(r,l){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:r,result:l}),this._proceed())},s.prototype._onPooledPromiseRejected=function(r,l){this._size--,this.active()&&(this._fireEvent("rejected",{promise:r,error:l}),this._settle(l||new Error("Unknown error")))},s.prototype._trackPromise=function(r){var l=this;r.then(function(p){l._onPooledPromiseFulfilled(r,p)},function(p){l._onPooledPromiseRejected(r,p)}).catch(function(p){l._settle(new Error("Promise processing failed: "+p))})},s.prototype._proceed=function(){if(!this._done){for(var r={done:!1};this._size<this._concurrency&&!(r=this._iterator.next()).done;)this._size++,this._trackPromise(r.value);this._done=r===null||!!r.done}this._done&&this._size===0&&this._settle()},s.PromisePoolEvent=c,s.PromisePool=s,s})});var be=X(D=>{"use strict";a();Object.defineProperty(D,"__esModule",{value:!0});D.sanitizeUrl=void 0;var Qe=/^([^\w]*)(javascript|data|vbscript)/im,et=/&#(\w+)(^\w|;)?/g,tt=/&(newline|tab);/gi,nt=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,ot=/^.+(:|&colon;)/gim,rt=[".","/"];function it(e){return rt.indexOf(e[0])>-1}function st(e){return e.replace(et,function(t,n){return String.fromCharCode(n)})}function at(e){var t=st(e||"").replace(tt,"").replace(nt,"").trim();if(!t)return"about:blank";if(it(t))return t;var n=t.match(ot);if(!n)return t;var o=n[0];return Qe.test(o)?"about:blank":t}D.sanitizeUrl=at});a();a();var $=class{constructor(t){this.scoreFunction=t}content=[];sinkDown(t){let n=this.content[t];for(;t>0;){let o=(t+1>>1)-1,i=this.content[o];if(this.scoreFunction(n)<this.scoreFunction(i))this.content[o]=n,this.content[t]=i,t=o;else break}}bubbleUp(t){let n=this.content.length,o=this.content[t],i=this.scoreFunction(o);for(;;){let c=t+1<<1,s=c-1,r=null,l=0;if(s<n){let p=this.content[s];l=this.scoreFunction(p),l<i&&(r=s)}if(c<n){let p=this.content[c];this.scoreFunction(p)<(r===null?i:l)&&(r=c)}if(r!==null)this.content[t]=this.content[r],this.content[r]=o,t=r;else break}}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){if(this.content.length===0)return null;let t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t}remove(t){if(this.content.length===0)return;let n=this.content.indexOf(t),o=this.content.pop();n<this.content.length&&(this.content[n]=o,this.scoreFunction(o)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}};a();var j={white:"#ffffff",black:"#000000",gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};var Oe=(e,t)=>t.reduce((n,o)=>(o in e&&(n[o]=e[o]),n),{}),xt=5,Et=5,Tt=4,C=4,I=1,E=[0,2,4,6,8],bt=[0,1,2,3,4],T=(e,t)=>t.map(n=>j[e][n]),u={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:T("gray",E),red:T("red",E),pink:T("pink",E),grape:T("grape",E),violet:T("violet",E),blue:T("blue",E),cyan:T("cyan",E),teal:T("teal",E),green:T("green",E),yellow:T("yellow",E),orange:T("orange",E),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},q=Oe(u,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"]),Pt=[u.black,u.red[C],u.green[C],u.blue[C],u.yellow[C]],ht=[u.transparent,u.red[I],u.green[I],u.blue[I],u.yellow[I]],gt=[u.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],yt={transparent:u.transparent,white:u.white,gray:u.gray,black:u.black,bronze:u.bronze,...q},_t={transparent:u.transparent,white:u.white,gray:u.gray,black:u.black,bronze:u.bronze,...q},At=e=>[u.cyan[e],u.blue[e],u.violet[e],u.grape[e],u.pink[e],u.green[e],u.teal[e],u.yellow[e],u.orange[e],u.red[e]],Lt=(e,t,n)=>`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`;a();var M=/Mac|iPod|iPhone|iPad/.test(navigator.platform),Ot=/^Win/.test(navigator.platform),Ct=/\b(android)\b/i.test(navigator.userAgent),It="netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,Ce=navigator.userAgent.indexOf("Chrome")!==-1,Mt=!Ce&&navigator.userAgent.indexOf("Safari")!==-1,Ft=/iPad|iPhone/.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,wt=()=>navigator.brave?.isBrave?.name==="isBrave",Dt=typeof window<"u"&&"ResizeObserver"in window,Ut="Excalidraw",Nt=36,kt=10,Ht=8,Gt=5,Kt=1,Bt=30,Vt=Math.PI/12,Wt="red",Yt={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},Xt={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},zt={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"},Ie=(m=>(m.COPY="copy",m.PASTE="paste",m.CUT="cut",m.KEYDOWN="keydown",m.KEYUP="keyup",m.MOUSE_MOVE="mousemove",m.RESIZE="resize",m.UNLOAD="unload",m.FOCUS="focus",m.BLUR="blur",m.DRAG_OVER="dragover",m.DROP="drop",m.GESTURE_END="gestureend",m.BEFORE_UNLOAD="beforeunload",m.GESTURE_START="gesturestart",m.GESTURE_CHANGE="gesturechange",m.POINTER_MOVE="pointermove",m.POINTER_DOWN="pointerdown",m.POINTER_UP="pointerup",m.STATE_CHANGE="statechange",m.WHEEL="wheel",m.TOUCH_START="touchstart",m.TOUCH_END="touchend",m.HASHCHANGE="hashchange",m.VISIBILITY_CHANGE="visibilitychange",m.SCROLL="scroll",m.EXCALIDRAW_LINK="excalidraw-link",m.MENU_ITEM_SELECT="menu.itemSelect",m.MESSAGE="message",m.FULLSCREENCHANGE="fullscreenchange",m))(Ie||{}),$t={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},G={TEST:"test",DEVELOPMENT:"development"},jt={SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper"},J="Xiaolai",A="Segoe UI Emoji",f={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9},K={[J]:100,[A]:1e3},Q=e=>{switch(e){case f.Excalifont:return[J,A];default:return[A]}},qt={LIGHT:"light",DARK:"dark"},Zt={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},Jt=1,Qt=20,en=f.Excalifont,tn="left",nn="top",ee="{version}",Me=2,Fe=2*Me,we=1e-5,on=2*Fe-we,rn="#ffffff",sn="#1e1e1e",an="#a2f1a6",ln=["selectAll"],cn=20,un=5,te={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},Z={text:"text/plain",html:"text/html",json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...te},pn=[Z.text,Z.html,...Object.values(te)],dn={png:"png",svg:"svg",clipboard:"clipboard"},mn={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},fn=window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,xn=500,En=300,Tn=500,bn=1e4,Pn=3e4,hn=100,gn=.1,yn=.1,_n=30,An=300,Ln=6e4,Sn=3e3,Rn="invert(93%) hue-rotate(180deg)",vn={addLibrary:"addLibrary"},On={addLibrary:"addLibrary"},Cn={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0},tools:{image:!0}},In=730,Mn=1e3,Fn=500,wn=1229,Dn=2,Un=[1,2,3],Nn=10,kn=1440,Hn=4*1024*1024,Gn="http://www.w3.org/2000/svg",Kn=128,Bn={excalidraw:2,excalidrawLibrary:2},Vn=5,Wn=.7,Yn=11,Xn={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},zn={LEFT:"left",CENTER:"center",RIGHT:"right"},$n=20,jn=.25,qn=32,Zn={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},De={architect:0,artist:1,cartoonist:2},Jn={thin:1,bold:2,extraBold:4},Qn={strokeColor:u.black,backgroundColor:u.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:De.artist,opacity:100,locked:!1},Ue="library",eo="search",to={name:"default",defaultTab:Ue},no=new Set(["iframe","embeddable","image"]),oo={selection:"selection",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",arrow:"arrow",line:"line",freedraw:"freedraw",text:"text",image:"image",eraser:"eraser",hand:"hand",frame:"frame",magicframe:"magicframe",embeddable:"embeddable",laser:"laser"},ro={OAI_API_KEY:"excalidraw-oai-api-key",MERMAID_TO_EXCALIDRAW:"mermaid-to-excalidraw",PUBLISH_LIBRARY:"publish-library-data"},io="Untitled",so={generalStats:1,elementProperties:2},ao=1,lo={sharp:"sharp",round:"round",elbow:"elbow"},co=.3,uo="element",po=Symbol.for("__test__originalId__"),Ne=(o=>(o.ACTIVE="active",o.AWAY="away",o.IDLE="idle",o))(Ne||{});a();var F={[f.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25}},[f.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.35}},[f["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15}},[f["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25}},[f.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},deprecated:!0},[f.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},deprecated:!0,local:!0},[f.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},deprecated:!0},[f["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},serverSide:!0},[K.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.15},fallback:!0},[K["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},Eo={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},To="local:",bo=(e,t,n)=>{let{unitsPerEm:o,ascender:i,descender:c}=F[e]?.metrics||F[f.Excalifont].metrics,s=t/o,r=(n-s*i+s*c)/2;return s*i+r},Po=e=>{let{lineHeight:t}=F[e]?.metrics||F[f.Excalifont].metrics;return t};a();var ne=class{jobs=[];running=!1;tick(){if(this.running)return;let t=this.jobs.shift();t?(this.running=!0,t.promise.resolve(re(t.jobFactory,...t.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(t,...n){let o=oe();return this.jobs.push({jobFactory:t,promise:o,args:n}),this.tick(),o}};a();var ie={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",NINE:"Digit9",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},y={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:M?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SUBTRACT:"-",SLASH:"/",A:"a",C:"c",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",W:"w",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},ke=new Map([[y.Z,ie.Z],[y.Y,ie.Y]]),He=e=>/^[a-z]$/.test(e.toLowerCase()),So=(e,t)=>{if(t===e.key.toLowerCase())return!0;let n=ke.get(t);return!!(n&&!He(e.key)&&e.code===n)},Ro=e=>e===y.ARROW_LEFT||e===y.ARROW_RIGHT||e===y.ARROW_DOWN||e===y.ARROW_UP,vo=e=>e.altKey,Oo=e=>e.shiftKey,Co=e=>e.shiftKey;a();a();a();a();var L=(e,t)=>(e+t)/2;a();a();a();a();a();a();a();a();a();a();var qr=e=>{let t=e.map(o=>o[0]),n=e.map(o=>o[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},Zr=(e,t,n,o)=>{let i=n.map(b=>b[e]),c=Math.max(...i),s=Math.min(...i),r=c-s,l=r===0?1:t/r,p=1/0,x=n.map(b=>{let P=b[e]*l,h=[...b];return h[e]=P,P<p&&(p=P),h});if(!o||x.length===2)return x;let R=s-p;return x.map(b=>b.map((P,h)=>h===e?P+R:P))},Jr=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t];a();var ue=z(le(),1),ce=class{pool;entries={};constructor(t,n){this.pool=new ue.default(t,n)}all(){let t=n=>{if(n.data.result){let[o,i]=n.data.result;this.entries[o]=i}};return this.pool.addEventListener("fulfilled",t),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",t)}),Object.values(this.entries)))}};a();a();a();var pe=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");a();var S=class{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}};a();var W=null,xi=e=>{W=e},Ei=()=>{if(W)return W;let e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),o=`${e.getDate()}`.padStart(2,"0"),i=`${e.getHours()}`.padStart(2,"0"),c=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${o}-${i}${c}`},Ti=e=>e.charAt(0).toUpperCase()+e.slice(1),bi=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),Ye=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,Pi=e=>Ye(e)||e instanceof Element&&!!e.closest("label, button"),hi=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&(e.type==="text"||e.type==="number"||e.type==="password"),Xe=({fontFamily:e})=>{for(let[t,n]of Object.entries(f))if(n===e)return`${t}${Q(n).map(o=>`, ${o}`).join("")}`;return A},gi=({fontSize:e,fontFamily:t})=>`${e}px ${Xe({fontFamily:t})}`,yi=(e,t)=>{let n=0,o=null,i=(...c)=>{o=c,clearTimeout(n),n=window.setTimeout(()=>{o=null,e(...c)},t)};return i.flush=()=>{if(clearTimeout(n),o){let c=o;o=null,e(...c)}},i.cancel=()=>{o=null,clearTimeout(n)},i},_i=(e,t)=>{let n=null,o=null,i=null,c=r=>{n=window.requestAnimationFrame(()=>{n=null,e(...r),o=null,i&&(o=i,i=null,c(o))})},s=(...r)=>{if(w()){e(...r);return}o=r,n===null?c(o):t?.trailing&&(i=r)};return s.flush=()=>{n!==null&&(cancelAnimationFrame(n),n=null),o&&(e(...i||o),o=i=null)},s.cancel=()=>{o=i=null,n!==null&&(cancelAnimationFrame(n),n=null)},s},fe=e=>1-Math.pow(1-e,4),de=(e,t,n)=>(t-e)*fe(n)+e,Ai=({fromValues:e,toValues:t,onStep:n,duration:o=250,interpolateValue:i,onStart:c,onEnd:s,onCancel:r})=>{let l=!1,p=0,x;function R(U){if(l)return;x===void 0&&(x=U,c?.());let b=Math.min(U-x,o),P=fe(b/o),h={};if(Object.keys(e).forEach(_=>{let g=_,N=(t[g]-e[g])*P+e[g];h[g]=N}),n(h),b<o){let _=b/o,g={};Object.keys(e).forEach(N=>{let v=N,k=e[v],H=t[v],O;O=i?i(k,H,_,v):de(k,H,_),O==null&&(O=de(k,H,_)),g[v]=O}),n(g),p=window.requestAnimationFrame(R)}else n(t),s?.()}return p=window.requestAnimationFrame(R),()=>{r?.(),l=!0,window.cancelAnimationFrame(p)}},Li=(e,t)=>{if(!e.length||t<1)return[];let n=0,o=0,i=Array(Math.ceil(e.length/t));for(;n<e.length;)i[o++]=e.slice(n,n+=t);return i},Si=e=>{let t=window.getSelection();if(t){let n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}},Ri=()=>{let e=window.getSelection();e&&e.removeAllRanges()},vi=(e,t)=>Math.abs(e-t),Oi=(e,t)=>t.type==="custom"?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:t.lastActiveToolBeforeEraser===void 0?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked},Ci=()=>document.fullscreenElement?.nodeName==="HTML",Ii=()=>document.documentElement.requestFullscreen(),Mi=()=>document.exitFullscreen(),Fi=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),M?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),wi=({clientX:e,clientY:t},{zoom:n,offsetLeft:o,offsetTop:i,scrollX:c,scrollY:s})=>{let r=(e-o)/n.value-c,l=(t-i)/n.value-s;return{x:r,y:l}},Di=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:o,offsetTop:i,scrollX:c,scrollY:s})=>{let r=(e+c)*n.value+o,l=(t+s)*n.value+i;return{x:r,y:l}},Ui=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),ze="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u2C00-\uFB1C\uFDFE-\uFE6F\uFEFD-\uFFFF",$e="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",je=new RegExp(`^[^${ze}]*[${$e}]`),Ni=e=>je.test(e),ki=e=>{let[t,n]=e;return{x:t,y:n}},Hi=e=>{if(e?.name==="AbortError"){console.warn(e);return}throw e},Gi=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let o=n-1;for(;++o<e.length;)if(t(e[o],o,e))return o;return-1},Ki=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let o=n+1;for(;--o>-1;)if(t(e[o],o,e))return o;return-1},qe=e=>{let t=e.length===5&&e.substr(4,1)==="0",n=e.length===9&&e.substr(7,2)==="00";return t||n||e===u.transparent},Bi=e=>e.fillStyle!=="solid"||qe(e.backgroundColor),oe=()=>{let e,t,n=new Promise((o,i)=>{e=o,t=i});return n.resolve=e,n.reject=t,n},Vi=(e,t)=>{let n=[{value:1,symbol:"b"},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"}],o=/\.0+$|(\.[0-9]*[1-9])0+$/,i;for(i=n.length-1;i>0&&!(e>=n[i].value);i--);return(e/n[i].value).toFixed(t).replace(o,"$1")+n[i].symbol},Wi=()=>document.querySelector('meta[name="version"]')?.content||ee,Yi=()=>{let t=document.createElement("canvas").getContext("2d");if(!t)return!1;let n=12;return t.fillStyle="#f00",t.textBaseline="top",t.font="32px Arial",t.fillText("\u{1F600}",0,0),t.getImageData(n,n,1,1).data[0]!==0},Xi=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;let{overflowY:n}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return t;t=t.parentElement}return document},zi=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1){t.focus();return}t=t.parentElement}},$i=e=>{e.preventDefault(),e.returnValue=""},ji=e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join(""),qi=()=>w()?1:Date.now(),Zi=e=>e instanceof Map?e:e.reduce((t,n)=>(t.set(typeof n=="string"?n:n.id,n),t),new Map),Ji=e=>e.reduce((t,n,o)=>(t.set(n.id,[n,o]),t),new Map),Qi=(e,t)=>e.reduce((n,o)=>(n[t?t(o):String(o)]=o,n),{}),es=e=>e.reduce((t,n,o)=>{let i={...n,prev:null,next:null};if(o!==0){let c=t[o-1];if(i.prev=c,c.next=i,o===e.length-1){let s=t[0];i.next=s,s.prev=i}}return t.push(i),t},[]),w=()=>d.MODE===G.TEST,ts=()=>d.MODE===G.DEVELOPMENT,ns=()=>typeof process<"u"&&!0,os=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),rs=(e,t)=>{let n=!1;for(let o in t){let i=t[o];if(typeof i<"u"){if(e[o]===i&&(typeof i!="object"||i===null))continue;n=!0}}return n?{...e,...t}:e},is=e=>{let t=typeof e;return e==null||t!=="object"&&t!=="function"},Ze=()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},ss=()=>Ze()==="iframe",as=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,ls=e=>{let t=e?.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(n=>n.tabIndex>-1&&!n.disabled):[]},me=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t,Je=(e,t,n,o=!1)=>{let i=Object.keys(e),c=Object.keys(t);if(i.length!==c.length)return o&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(let s of n)if(!(e[s]===t[s]||me(e[s],t[s])))return o&&console.warn(`%cisShallowEqual: ${s} not equal ->`,"color: #8B4000",e[s],t[s]),!1;return!0}return i.every(s=>{let r=n?.[s],l=r?r(e[s],t[s]):e[s]===t[s]||me(e[s],t[s]);return!l&&o&&console.warn(`%cisShallowEqual: ${s} not equal ->`,"color: #8B4000",e[s],t[s]),l})},cs=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(i){if(e?.(i),!n||!i?.defaultPrevented)return t?.(i)},us=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw new Error(t)};function ps(e,t){if(!e)throw new Error(t)}var ds=e=>{let t,n,o=function(i){let c=Object.entries(i);if(t){let r=!0;for(let[l,p]of c)if(t.get(l)!==p){r=!1;break}if(r)return n}let s=e(i);return t=new Map(c),n=s,s};return o.clear=()=>{t=void 0,n=void 0},o},ms=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),fs=e=>JSON.parse(JSON.stringify(e)),xs=(e,t)=>Je(e,t)?e:t;function Es(e,t,n,o){return e?(e?.addEventListener?.(t,n,o),()=>{e?.removeEventListener?.(t,n,o)}):()=>{}}function Ts(e,t=!0){let n=e.length;if(n<4)return"";let o=e[0],i=e[1],c=e[2],s=`M${o[0].toFixed(2)},${o[1].toFixed(2)} Q${i[0].toFixed(2)},${i[1].toFixed(2)} ${L(i[0],c[0]).toFixed(2)},${L(i[1],c[1]).toFixed(2)} T`;for(let r=2,l=n-1;r<l;r++)o=e[r],i=e[r+1],s+=`${L(o[0],i[0]).toFixed(2)},${L(o[1],i[1]).toFixed(2)} `;return t&&(s+="Z"),s}var bs=e=>e.replace(/\r?\n|\r/g,`
`),We=e=>e,re=async(e,...t)=>new Promise(n=>{n(e(...t))}),Ps=(...e)=>Math.max(...e.map(t=>t?1:0))>0,hs=e=>{try{return JSON.parse(e)}catch{return null}},xe=e=>e.replace(/"/g,"&quot;"),gs=e=>Array.isArray(e)?e:[e];var Ee=new S(Date.now()),Te=0,Rs=()=>Math.floor(Ee.next()*2**31),vs=e=>{Ee=new S(e),Te=0},Os=()=>w()?`id${Te++}`:pe();a();var Pe=z(be(),1);var lt=e=>(e=e.trim(),e&&(0,Pe.sanitizeUrl)(xe(e))),Ds=e=>!!(e?.includes(location.origin)||e?.startsWith("/")),Us=e=>{if(e=lt(e),e.startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e};export{Sn as ACTIVE_THRESHOLD,pn as ALLOWED_PASTE_MIME_TYPES,Ut as APP_NAME,Yn as ARROW_LABEL_FONT_SIZE_TO_MIN_WIDTH_RATIO,Wn as ARROW_LABEL_WIDTH_FRACTION,lo as ARROW_TYPE,Vn as BOUND_TEXT_PADDING,$ as BinaryHeap,ln as CANVAS_ONLY_ACTIONS,bt as CANVAS_PALETTE_SHADE_INDEXES,eo as CANVAS_SEARCH_TAB,J as CJK_HAND_DRAWN_FALLBACK_FONT,jt as CLASSES,ie as CODES,Et as COLORS_PER_ROW,sn as COLOR_CHARCOAL_BLACK,u as COLOR_PALETTE,an as COLOR_VOICE_CALL,rn as COLOR_WHITE,Yt as CURSOR_TYPE,qn as DEFAULT_ADAPTIVE_RADIUS,gt as DEFAULT_CANVAS_BACKGROUND_PICKS,Tt as DEFAULT_CHART_COLOR_INDEX,on as DEFAULT_COLLISION_THRESHOLD,I as DEFAULT_ELEMENT_BACKGROUND_COLOR_INDEX,_t as DEFAULT_ELEMENT_BACKGROUND_COLOR_PALETTE,ht as DEFAULT_ELEMENT_BACKGROUND_PICKS,Qn as DEFAULT_ELEMENT_PROPS,C as DEFAULT_ELEMENT_STROKE_COLOR_INDEX,yt as DEFAULT_ELEMENT_STROKE_COLOR_PALETTE,Pt as DEFAULT_ELEMENT_STROKE_PICKS,Nn as DEFAULT_EXPORT_PADDING,io as DEFAULT_FILENAME,en as DEFAULT_FONT_FAMILY,Qt as DEFAULT_FONT_SIZE,cn as DEFAULT_GRID_SIZE,un as DEFAULT_GRID_STEP,Wt as DEFAULT_LASER_COLOR,kn as DEFAULT_MAX_IMAGE_WIDTH_OR_HEIGHT,jn as DEFAULT_PROPORTIONAL_RADIUS,co as DEFAULT_REDUCED_GLOBAL_ALPHA,to as DEFAULT_SIDEBAR,tn as DEFAULT_TEXT_ALIGN,Me as DEFAULT_TRANSFORM_HANDLE_SPACING,Cn as DEFAULT_UI_OPTIONS,ee as DEFAULT_VERSION,nn as DEFAULT_VERTICAL_ALIGN,kt as DRAGGING_THRESHOLD,ro as EDITOR_LS_KEYS,E as ELEMENTS_PALETTE_SHADE_INDEXES,uo as ELEMENT_LINK_KEY,$n as ELEMENT_READY_TO_ERASE_OPACITY,Gt as ELEMENT_SHIFT_TRANSLATE_AMOUNT,Kt as ELEMENT_TRANSLATE_AMOUNT,Kn as ENCRYPTION_KEY_BITS,G as ENV,we as EPSILON,Ie as EVENT,mn as EXPORT_DATA_TYPES,dn as EXPORT_IMAGE_TYPES,Un as EXPORT_SCALES,fn as EXPORT_SOURCE,f as FONT_FAMILY,K as FONT_FAMILY_FALLBACKS,F as FONT_METADATA,Zt as FRAME_STYLE,Eo as GOOGLE_FONTS_RANGES,An as HYPERLINK_TOOLTIP_DELAY,Ln as IDLE_THRESHOLD,te as IMAGE_MIME_TYPES,xn as IMAGE_RENDER_TIMEOUT,y as KEYS,ke as KeyCodeMap,no as LIBRARY_DISABLED_TYPES,Ue as LIBRARY_SIDEBAR_TAB,Ht as LINE_CONFIRM_THRESHOLD,To as LOCAL_FONT_PROTOCOL,Hn as MAX_ALLOWED_FILE_BYTES,xt as MAX_CUSTOM_COLORS_USED_IN_CANVAS,Dn as MAX_DECIMALS_FOR_SVG_EXPORT,_n as MAX_ZOOM,Z as MIME_TYPES,Jt as MIN_FONT_SIZE,ao as MIN_WIDTH_OR_HEIGHT,yn as MIN_ZOOM,Fn as MQ_MAX_HEIGHT_LANDSCAPE,Mn as MQ_MAX_WIDTH_LANDSCAPE,In as MQ_MAX_WIDTH_PORTRAIT,wn as MQ_RIGHT_SIDEBAR_MIN_WIDTH,po as ORIG_ID,Xt as POINTER_BUTTON,zt as POINTER_EVENTS,ce as PromisePool,ne as Queue,De as ROUGHNESS,Zn as ROUNDNESS,hn as SCROLL_TIMEOUT,Vt as SHIFT_LOCKING_ANGLE,Fe as SIDE_RESIZING_THRESHOLD,so as STATS_PANELS,Jn as STROKE_WIDTH,Gn as SVG_NS,En as TAP_TWICE_TIMEOUT,zn as TEXT_ALIGN,Nt as TEXT_AUTOWRAP_THRESHOLD,Bt as TEXT_TO_CENTER_SNAP_THRESHOLD,qt as THEME,Rn as THEME_FILTER,bn as TITLE_TIMEOUT,oo as TOOL_TYPE,Tn as TOUCH_CTX_MENU_TIMEOUT,On as URL_HASH_KEYS,vn as URL_QUERY_KEYS,Ne as UserIdleState,Bn as VERSIONS,Pn as VERSION_TIMEOUT,Xn as VERTICAL_ALIGN,A as WINDOWS_EMOJI_FALLBACK_FONT,$t as YOUTUBE_STATES,gn as ZOOM_STEP,Es as addEventListener,Ii as allowFullScreen,es as arrayToList,Zi as arrayToMap,Ji as arrayToMapWithIndex,Qi as arrayToObject,us as assertNever,ji as bytesToHexString,Ti as capitalizeString,gs as castArray,Li as chunk,fs as cloneJSON,cs as composeEventHandlers,yi as debounce,vi as distance,fe as easeOut,Ai as easeToValuesRAF,xe as escapeDoubleQuotes,Mi as exitFullScreen,Gi as findIndex,Ki as findLastIndex,zi as focusNearestParent,At as getAllColorsSpecificShade,Ei as getDateTime,Q as getFontFamilyFallbacks,Xe as getFontFamilyString,gi as getFontString,Ze as getFrame,Ui as getGlobalCSSVariable,Jr as getGridPoint,Po as getLineHeight,Xi as getNearestScrollableContainer,Fi as getShortcutKey,qr as getSizeFromPoints,T as getSpecificColorShades,Ts as getSvgPathFromStroke,qi as getUpdatedTimestamp,Wi as getVersion,bo as getVerticalOffset,ps as invariant,Ct as isAndroid,Ps as isAnyTrue,Ro as isArrowKey,Bi as isBindingFallthroughEnabled,wt as isBrave,Ce as isChrome,M as isDarwin,ts as isDevEnv,It as isFirefox,Ci as isFullScreen,Ft as isIOS,Ye as isInputLike,Pi as isInteractive,He as isLatinChar,Ds as isLocalLink,ms as isMemberOf,is as isPrimitive,as as isPromiseLike,Ni as isRTL,ss as isRunningInIframe,Mt as isSafari,ns as isServerEnv,Je as isShallowEqual,w as isTestEnv,bi as isToolIcon,qe as isTransparent,Ot as isWindows,hi as isWritableElement,So as matchKey,ds as memoize,Hi as muteFSAbortError,Vi as nFormatter,bs as normalizeEOL,lt as normalizeLink,$i as preventUnload,re as promiseTry,ls as queryFocusableElements,Os as randomId,Rs as randomInteger,Ri as removeSelection,Zr as rescalePoints,vs as reseed,oe as resolvablePromise,Lt as rgbToHex,hs as safelyParseJSON,Di as sceneCoordsToViewportCoords,Si as selectNode,xi as setDateTimeForTests,Oo as shouldMaintainAspectRatio,vo as shouldResizeFromCenter,Co as shouldRotateWithDiscreteAngle,Yi as supportsEmoji,Dt as supportsResizeObserver,_i as throttleRAF,We as toBrandedType,Us as toValidURL,ki as tupleToCoors,Oi as updateActiveTool,rs as updateObject,xs as updateStable,wi as viewportCoordsToSceneCoords,os as wrapEvent};
